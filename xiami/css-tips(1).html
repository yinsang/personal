<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title></title>
	<style type="text/css">
	p{
		width: 300px;
		height:48px;
		line-height: 24px;
		overflow: hidden;
	}
	</style>	
</head>
<body>
	<p class="pa">今天中午吃什么？12345今天中1月30日午，该消息源自：http://www.you07.com/吃什么？gongd 今天中午吃什么？<a href="">描述</a></p>
</body>
<script src="http://libs.baidu.com/jquery/2.0.0/jquery.js"></script>
<script type="text/javascript">
var str = $(".pa").text();
function SetSub(str,n){  
   var strReg=/[^\x00-\xff]/g;  
   var _str=str.replace(strReg,"**");  
   var _len=_str.length;  
   if(_len>n){  
     var _newLen=Math.floor(n/2);  
     var _strLen=str.length;  
     for(var i=_newLen;i<_strLen;i++){  
         var _newStr=str.substr(0,i).replace(strReg,"**");  
         if(_newStr.length>=n){  
             return str.substr(0,i)+"...";  
             break;  
        }  
     }  
   }else{  
     return str;  
   }  
}
 console.log(SetSub(str,15));  
 $(".pa").html(SetSub(str,15))
</script>
</html>

<script type="text/javascript">
//一个汉字相当于2个字符
// 	var str = $(".pa").text();
//     function get_length(s){
//         var char_length = 0;
//         for (var i = 0; i < s.length; i++){
//             var son_char = s.charAt(i);
//             encodeURI(son_char).length > 2 ? char_length += 1 : char_length += 0.5;
//         }
//         return char_length;
//     }
//     function cut_str(str, len){
//         var char_length = 0;
//         for (var i = 0; i < str.length; i++){
//             var son_str = str.charAt(i);
//             encodeURI(son_str).length > 2 ? char_length += 1 : char_length += 0.5;
//             if (char_length >= len){
//                 var sub_len = char_length == len ? i+1 : i;
//                 return str.substr(0, sub_len);
//                 break;
//             }
//         }
//     }
// //  截取15个字（30个字符）
//     cut_str(str, 15);
</script>
<script>
// function subString(str, len, hasDot)
// {
//     var newLength = 0;
//     var newStr = "";
//     var chineseRegex = /[^\x00-\xff]/g;
//     var singleChar = "";
//     var strLength = str.replace(chineseRegex,"**").length;
//     for(var i = 0;i < strLength;i++){
//         singleChar = str.charAt(i).toString();
//         if(singleChar.match(chineseRegex) != null){
//             newLength += 2;
//         }else{
//             newLength++;
//         }
//         if(newLength > len){
//             break;
//         }
//         newStr += singleChar;
//     }
    
//     if(hasDot && strLength > len){
//         newStr += "...";
//     }
//     return newStr;
// }	
// 	var texta = $("p").html();
// 	alert(texta);
// 	subString(texta,10,true);
</script>
