<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>studyJS</title>

</head>
<body >
	<p>sssssss</p>
	最多输入5个字符，英文算一个，中文算两个：<input class='test' id='banNumber' data-model='Ch' data-length='5' type='text' value=''/>
	//对文本节点和元素节点的研究
	<script type="text/javascript">
	window.onload=function(){
		var inp2=document.getElementsByTagName('body')[0].getElementsByTagName('p')[0]
		var inp3=document.getElementsByTagName('body')[0].firstChild
		console.log(inp3.nextSibling)
		console.log(inp3.nextSibling.nextSibling)
		//文本节点和元素节点表示同一个p，但是p节点是元素节点，有innerHTML可以获取到内容，而文本节点无法获取到内容。
		//文本节点和元素节点同级，父节点均是body节点，text节点存在于元素节点前，用nextSibling可以得到。似乎每个元素节点都有文本节点存在于自己前面。文本节点获取文本，用nextSiblings获取下一个节点，再获取innerHTML就可以了。
	}
	</script>
	//输入字符长度控制区别中英文
	<script type="text/javascript">
	window.onload=function(){
		var inp=document.getElementById('banNumber')
		var func=function(tThis){
			var _v=tThis.value
			var _vLength=_v.length
			vv=_v.match(/[\u4e00-\u9fa5]/g)
			//此处如果不进行此null判断，会造成vv中无中文时读不出length。源文件在超实用js系列2.9中，他的验证太麻烦，我这种很简单，不知有没有什么bug=。=以后再讲
			if(vv==null){
				var vvLength=0
			}else{
				var vvLength=vv.length
			}
			if(vvLength>0){
				_vLength=_vLength+vvLength
			}else{
				_vLength=_vLength
			}
			var _vNeededLength=tThis.getAttribute('data-length')
			if(_vLength>_vNeededLength)
				tThis.value=_v.substr(0,_vNeededLength)
		}
		inp.onkeyup=function(){
			func(this)
		}
		inp.onblur=function(){
			func(this)
		}
	}
	</script>
</body>
</html>
